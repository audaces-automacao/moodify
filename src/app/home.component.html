<main class="min-h-screen bg-luxury-void flex flex-col">
  <!-- Header (includes language switcher) -->
  <app-header />

  <!-- Main Content -->
  <section class="flex-1 container mx-auto px-6 py-12 md:py-16">
    <!-- Input Section -->
    <app-mood-input
      [examples]="examplePrompts()"
      [isLoading]="isLoading()"
      (generate)="generateMoodBoard($event)"
    />

    <!-- Results Section -->
    <div #loadingSection class="mt-16 max-w-4xl mx-auto scroll-mt-8">
      <!-- Error State -->
      @if (error()) {
        <div
          class="glass-card border-luxury-rose bg-luxury-rose/10 p-6 text-center animate-fade-in"
        >
          <p class="text-uppercase text-luxury-rose text-sm mb-2">
            {{ 'app.errorLabel' | transloco }}
          </p>
          <p class="font-serif text-luxury-cream">{{ error() }}</p>
        </div>
      }

      <!-- Loading State -->
      @if (isLoading()) {
        <app-loading-skeleton />
      }

      <!-- Results -->
      @if (moodBoard()) {
        <app-mood-board
          [data]="moodBoard()!"
          [outfitImage]="outfitImage()"
          [isImageLoading]="isImageLoading()"
          [imageError]="imageError()"
        />

        <!-- Save Button -->
        @if (!isLoading()) {
          <div class="flex justify-center mt-8">
            <button
              (click)="openSaveDialog()"
              class="glass-btn-primary px-8 py-3 rounded-lg flex items-center gap-2 text-sm uppercase tracking-wider"
            >
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"
                />
              </svg>
              {{ 'library.saveButton' | transloco }}
            </button>
          </div>
        }
      }

      <!-- Empty State (initial) -->
      @if (!isLoading() && !moodBoard() && !error()) {
        <div class="text-center py-16 border border-dashed border-luxury-graphite/50 rounded-lg">
          <p class="font-serif text-2xl text-luxury-silver/70 italic">
            {{ 'app.emptyState' | transloco }}
          </p>
          <p class="text-uppercase text-xs text-luxury-silver/50 mt-4">
            {{ 'app.emptyHint' | transloco }}
          </p>
        </div>
      }
    </div>
  </section>

  <!-- Footer -->
  <footer class="border-t border-luxury-graphite py-6 mt-auto">
    <p class="text-uppercase text-center text-luxury-silver tracking-widest text-xs">
      {{ 'app.footer' | transloco }}
    </p>
    <p class="text-center text-luxury-silver/60 tracking-wider text-[10px] mt-1">
      {{ 'app.footerStack' | transloco }}
    </p>
  </footer>

  <!-- Save Dialog -->
  @if (showSaveDialog()) {
    <app-save-board-dialog (saved)="onSaveBoard($event)" (dismissed)="onCancelSave()" />
  }
</main>
